# ============================================
# Polygon L2 MVP 环境变量配置
# ============================================
# 使用说明:
# 1. 复制此文件为 .env: cp env.template .env
# 2. 填写所有必需的配置项
# 3. 运行部署脚本: ./scripts/deploy-mvp.sh
# ============================================

# ============ L1 配置 (atoshi-chain) ============

# L1 RPC 地址 (你的 atoshi-chain 节点)
L1_RPC_URL=http://YOUR_ATOSHI_CHAIN_IP:8545

# L1 WebSocket 地址 (可选)
L1_WS_URL=ws://YOUR_ATOSHI_CHAIN_IP:8546

# L1 链 ID
L1_CHAIN_ID=12345

# L1 区块浏览器 (可选)
L1_EXPLORER_URL=http://YOUR_ATOSHI_CHAIN_IP:4000


# ============ L2 配置 ============

# L2 链 ID (自定义，不要与 L1 相同)
L2_CHAIN_ID=67890

# L2 网络名称
L2_NETWORK_NAME=Atoshi-L2-MVP

# L2 RPC 端口 (避免与 L1 的 8545 冲突)
L2_RPC_PORT=8547

# L2 WebSocket 端口 (避免与 L1 的 8546 冲突)
L2_WS_PORT=8548


# ============ 账户私钥配置 ============
# ⚠️ 重要: 这些账户需要在 L1 上有足够的 ETH 余额
# ⚠️ 生产环境请使用 Keystore 文件，不要直接使用私钥

# 部署者私钥 (用于部署 L1 合约)
# 需要: L1 上至少 10 ETH
DEPLOYER_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Sequencer 私钥 (用于排序交易)
# 需要: L1 上至少 5 ETH (用于提交批次)
SEQUENCER_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Aggregator 私钥 (用于聚合证明)
# 需要: L1 上至少 5 ETH (用于提交证明)
AGGREGATOR_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Admin 私钥 (可选，用于管理操作)
ADMIN_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000


# ============ 数据库配置 ============

# PostgreSQL 用户名
POSTGRES_USER=zkevmuser

# PostgreSQL 密码 (⚠️ 生产环境请使用强密码)
POSTGRES_PASSWORD=zkevmpassword

# PostgreSQL 数据库名
POSTGRES_DB=zkevmdb

# PostgreSQL 端口 (避免与本地 PostgreSQL 冲突)
POSTGRES_PORT=5433

# PostgreSQL 主机 (Docker 内部使用)
POSTGRES_HOST=zkevm-db


# ============ Prover 配置 ============

# Prover 线程数 (根据 CPU 核心数调整)
# MVP 推荐: 4-8
# 生产环境: 16-32
PROVER_THREADS=4

# Prover 内存限制 (GB)
PROVER_MEMORY_LIMIT=16

# Prover 服务端口
PROVER_MT_PORT=50061
PROVER_EXECUTOR_PORT=50071


# ============ Gas 配置 ============

# L1 Gas Price (Gwei) - 用于提交到 L1
L1_GAS_PRICE=20

# L2 Gas Price (Gwei) - L2 内部交易
L2_GAS_PRICE=1

# L2 最小 Gas Price
L2_MIN_GAS_PRICE=0.1

# L2 最大 Gas Limit
L2_MAX_GAS_LIMIT=30000000


# ============ Sequencer 配置 ============

# Batch 大小 (交易数)
SEQUENCER_BATCH_SIZE=100

# Batch 超时时间 (秒)
SEQUENCER_BATCH_TIMEOUT=60

# 最大待处理交易数
SEQUENCER_MAX_PENDING_TXS=1000


# ============ Aggregator 配置 ============

# 聚合间隔 (秒)
AGGREGATOR_INTERVAL=300

# 每次聚合的最大 batch 数
AGGREGATOR_MAX_BATCHES=10


# ============ 监控配置 (可选) ============

# Prometheus 端口
PROMETHEUS_PORT=9091

# 是否启用 Metrics
ENABLE_METRICS=true

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info


# ============ 隐私合约配置 (部署后填写) ============

# Verifier 合约地址 (L2)
VERIFIER_CONTRACT_ADDRESS=

# Privacy Pool 合约地址 (L2)
PRIVACY_POOL_CONTRACT_ADDRESS=

# Bridge 合约地址 (L1)
BRIDGE_CONTRACT_ADDRESS=


# ============ 高级配置 (通常不需要修改) ============

# 同步模式 (full, light)
SYNC_MODE=full

# 是否启用 WebSocket
ENABLE_WS=true

# 最大连接数
MAX_CONNECTIONS=100

# 数据保留时间 (天)
DATA_RETENTION_DAYS=30

# 是否启用 CORS
ENABLE_CORS=true

# CORS 允许的域名
CORS_ORIGINS=*


# ============ 开发/调试配置 ============

# 是否启用调试模式
DEBUG_MODE=false

# 是否启用 Pprof (性能分析)
ENABLE_PPROF=false

# Pprof 端口
PPROF_PORT=6060


# ============================================
# 快速配置检查清单
# ============================================
# ✅ L1_RPC_URL - 指向你的 atoshi-chain
# ✅ L1_CHAIN_ID - 与 atoshi-chain 一致
# ✅ L2_CHAIN_ID - 自定义，不要与 L1 相同
# ✅ DEPLOYER_PRIVATE_KEY - 有足够 L1 ETH
# ✅ SEQUENCER_PRIVATE_KEY - 有足够 L1 ETH
# ✅ AGGREGATOR_PRIVATE_KEY - 有足够 L1 ETH
# ✅ POSTGRES_PASSWORD - 修改默认密码
# ============================================

